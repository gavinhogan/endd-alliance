<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title | default("ENDD COMMAND CENTER | Last War Server 2143") }}</title>
    
    <!-- Path resolution using 11ty filters -->
    <link rel="stylesheet" href="{{ '/styles/main.css' | url }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto+Condensed:wght@700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" href="{{ '/assets/favicon.png' | url }}">
</head>

<body>
    <div class="hud-overlay"></div>
    <header>
        <div class="container"
            style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
            <div class="logo pulse-active">ENDD COMMAND CENTER</div>
            
            {% if backLink %}
            <nav>
                <a href="{{ '/' | url }}" class="back-link">‚Üê COMMAND CENTER</a>
            </nav>
            {% endif %}

            <div class="language-switcher notranslate">
                <a href="javascript:void(0)" onclick="translatePage('en')" class="lang-link active">EN</a>
                <a href="javascript:void(0)" onclick="translatePage('ko')" class="lang-link">KO</a>
                <a href="javascript:void(0)" onclick="translatePage('es')" class="lang-link">ES</a>
                <a href="javascript:void(0)" onclick="translatePage('pt')" class="lang-link">PT</a>
            </div>
            <div id="google_translate_element" style="display:none"></div>
        </div>
    </header>

    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                autoDisplay: false
            }, 'google_translate_element');
        }

        function translatePage(langCode) {
            var select = document.querySelector('select.goog-te-combo');
            if (select) {
                select.value = langCode;
                select.dispatchEvent(new Event('change'));
            }
            // Update active state
            document.querySelectorAll('.lang-link').forEach(link => {
                link.classList.remove('active');
                if (link.innerText.toLowerCase() === langCode) link.classList.add('active');
            });
        }
    </script>
    <script type="text/javascript">
        function copyIntel(id) {
            const url = window.location.href.split('#')[0] + '#' + id;
            navigator.clipboard.writeText(url);
            const btn = document.querySelector(`[onclick="copyIntel('${id}')"]`);
            if(btn) {
                const original = btn.innerHTML;
                btn.innerHTML = 'COPIED';
                setTimeout(() => btn.innerHTML = original, 2000);
            }
        }
    </script>
    <script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <main class="container">
        {{ content | safe }}
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 ENDD Alliance - Last War Server 2143</p>
            <p style="font-size: 0.7rem; margin-top: 5px; opacity: 0.5;">VERSION: 1.0.9</p>
        </div>
    </footer>
</body>

</html>
